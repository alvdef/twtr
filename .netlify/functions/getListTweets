const axios = require("axios");

const token = process.env.BEARER_TOKEN;


exports.handler = async function (event, context) {

    const { listId } = event.queryStringParameters;
    
    const endpointURL = `https://api.twitter.com/2/lists/${listId}/tweets`;

    try {
        const res = await axios.get(endpointURL, {
            headers: {
                authorization: `Bearer ${token}`,
            },
            params: {
                "tweet.fields": "created_at",   
                expansions: "author_id",            
                "user.fields": "name,url,username",    
            }
        });
        return {
            statusCode: 200,
            body: res.body,
        }
    } catch (err) {
        return {
            statusCode: 404,
            body: err.toString(),
        }
    }
}
